<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Zenoh for Vehicle Network Guide</title>
                <meta name="robots" content="noindex" />
                

        <!-- Custom HTML head -->
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

                <link rel="icon" href="favicon.svg">
                        <link rel="shortcut icon" href="favicon.png">
                <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
                <link rel="stylesheet" href="css/print.css" media="print">
        
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
                <link rel="stylesheet" href="fonts/fonts.css">
        
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        
            </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="1-overview.html"><strong aria-hidden="true">1.</strong> Overview</a></li><li class="chapter-item expanded "><a href="2-zenoh_internal.html"><strong aria-hidden="true">2.</strong> Zenoh Internals</a></li><li class="chapter-item expanded "><a href="3-tsn.html"><strong aria-hidden="true">3.</strong> TSN Network on Linux</a></li><li class="chapter-item expanded "><a href="4-zenoh-cits.html"><strong aria-hidden="true">4.</strong> ETSI C-ITS on Zenoh</a></li></ol>            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                                                <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                                            </div>

                    <h1 class="menu-title">Zenoh for Vehicle Network Guide</h1>

                    <div class="right-buttons">
                                                <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                                                                        
                    </div>
                </div>

                                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="the-goal-of-the-project"><a class="header" href="#the-goal-of-the-project">The Goal of The Project</a></h1>
<p>This project focuses on the study of the construction of the vechile
network based on named data networking semantics using emerging
technologies. It idea is to locate data pieces using rich path
expressions instead of addresses to support multi-vehicle monitoring
and remote control. The targeted scenario is illustrated as follows.</p>
<p><img src="figures/project-overview.png" alt="" /></p>
<h2 id="the-technologies-to-be-used"><a class="header" href="#the-technologies-to-be-used">The Technologies to Be Used</a></h2>
<h3 id="time-sensitive-network-and-linux-qdiscs"><a class="header" href="#time-sensitive-network-and-linux-qdiscs">Time-sensitive Network and Linux QDISCs</a></h3>
<p>Time-sensitive Network is a set of standards from IEEE 802.1 working
group. It compiles basic constructs to build a network that with
advanced congestion control and latency guarantees. The components
include gating, priority selection policies and shapers. The
impplementation is mostly done by Linux QDISCs in this project. QDISC
is a part of Linux traffic control (TC) that allows users to define
queing policies, filters and gating control on network devices.</p>
<h3 id="zenoh"><a class="header" href="#zenoh">Zenoh</a></h3>
<p>Zenoh acts as a middleware that allow devices to communicate through
publication/subscription manner, in which data is named by a path
expression. It detangles the data content and the actual address of
network peers. In this way, the data sources are discovered through a
discovery mechanism and the connections are established
afterwards. The application using Zenoh simply provide the names of
data that is desired or is provided by the peer.</p>
<h3 id="etsi-c-its-nad-vanetza"><a class="header" href="#etsi-c-its-nad-vanetza">ETSI C-ITS nad Vanetza</a></h3>
<p>ETSI C-ITS is a set of standards to describe the construction of
intelligent transport system (ITS) in Europe. It defines the concepts,
protocols and message formats used in the ITS system. In this project,
the GeoNetworking protocol and Basic Transport Protocol (BTP) are used
to achieve geographical data transport.</p>
<h2 id="challenges"><a class="header" href="#challenges">Challenges</a></h2>
<h3 id="the-integration-of-high-level-zenoh-network-and-c-its-protocols"><a class="header" href="#the-integration-of-high-level-zenoh-network-and-c-its-protocols">The Integration of High-Level Zenoh Network and C-ITS Protocols</a></h3>
<p>The integration work is necessary for userspace programs to access
remote vehicle and cloud services through the standard C-ITS vehicle
network. The challenge is to bridge the seemly differenct concept
among the higher and lower layers. For example, the single-hop
geocasting is defined in C-ITS GeoNetworking, but the Zenoh does not
has the capability yet.</p>
<h3 id="data-transmission-reliability-under-vehicle-mobility-assuptions"><a class="header" href="#data-transmission-reliability-under-vehicle-mobility-assuptions">Data Transmission Reliability under Vehicle Mobility Assuptions</a></h3>
<p>The current network architecture totally replies on 5G/LTE to process
the mobility status of vehicles, which is not address by the Zenoh
middleware. The applications above could experience temporary data
outage due to the transfer of base stations and route changes. On the
other hand, the current Zenoh routing algorithm does not process the
case of high-fequent route change.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="zenoh-internals"><a class="header" href="#zenoh-internals">Zenoh Internals</a></h1>
<p>This chapter gives a brief overview of internal components in
Zenoh. The basic components is shown in the figure below.</p>
<p><img src="figures/zenoh-internals.drawio.png" alt="" /></p>
<h2 id="zenoh-io---transports-and-links"><a class="header" href="#zenoh-io---transports-and-links">Zenoh I/O - Transports and Links</a></h2>
<p>A <strong>transport</strong> tracks a high-level relation to a Zenoh peer on the
network, which maintains one or more <strong>links</strong> toward that peer. A
<strong>link</strong> is a basic unit of network connection, such as a TCP, a UDP
or an UNIX domain socket.</p>
<p>As you can see in the figure, a tranport has a RX head and a TX head,
respectively serve for data ingress and egress work loads. Both heads
contain 8 sequence number counters for 8 levels of priorities.</p>
<p>A transport also stores a list of related links. Each link has a
pipeline of 8 queues attached beforehand (named <code>TrasnmissionPipeline</code>
in source code), each serving for a respective priority. In this
pipeline, the messages to be sent are arranged into batches, and the
batches are later sent to the socket wrapped in the link struct.</p>
<h2 id="routing"><a class="header" href="#routing">Routing</a></h2>
<p>Zenoh provides several routing strategies named <strong>Hat Code</strong>. Each Hat
Code provides functions to update the route table and to compute the
routes.</p>
<ul>
<li>Client</li>
<li>Router</li>
<li>P2P Peer &amp; Link-State Peer</li>
</ul>
<p>In the network, each peer can be one of <em>router</em>, <em>peer</em> and <em>client</em>
roles. The router peers uses the Router Hat Code, while client peers
uses the Client Hat Code. The Router peers performs link-state routing
among the other router peers. The client peers do not perform any
routing computation, but simply forward messages to a preassigned
router peer.</p>
<p>When a peer acts in a <em>peer</em> role, it has two Hat Code to use, the P2P
and Link-State. In P2P mode, the peers assume that every peer in the
network is directly reachable. In Link-State mode, each peer performs
link-state routing algorithm and each peer maintains a netowrk graph
internally.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="tsn-network-on-linux"><a class="header" href="#tsn-network-on-linux">TSN Network on Linux</a></h1>
<p>The work was done under the cooperation of NEWSLAB, National Taiwan
University and ADLINK Corp. The online tutorial can be found at</p>
<p><a href="https://tsn-tutorial.readthedocs.io/en/latest/">https://tsn-tutorial.readthedocs.io/en/latest/</a></p>
<p>and the document source is located at</p>
<p><a href="https://github.com/Adlink-ROS/TSN-tutorial">https://github.com/Adlink-ROS/TSN-tutorial</a></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="etsi-c-its-on-zenoh"><a class="header" href="#etsi-c-its-on-zenoh">ETSI C-ITS on Zenoh</a></h1>
<p>The work aims to enable the vehicle-to-vehicle communication
capability on Zenoh, in which the European C-ITS standard is
preferred. It resues the protocols and data format already implemented
in the Vanetza project (<a href="https://www.vanetza.org/">doc</a>). There are
two major works planned in the project.</p>
<ol>
<li>Integrate the BTP/GN network stack from Vanetza as the replacement
of TCP/IP on Zenoh. It enables high-level applications to process
vehicle-to-anything messages in a native way, and enables
geographical data multicast and peer discovery.</li>
<li>The Zenoh routing algorithm should be modified to recognize the
movement of vehicles according to geographical information.</li>
</ol>
<h2 id="architecture"><a class="header" href="#architecture">Architecture</a></h2>
<p>The overall architecture is shown in the figure below. The BTP/GN
stack will be added to Zenoh apart from existing TCP/IP stack. A
dedicated Zenoh-to-C-ITS brige will be implemented to process messages
defined in ETSI C-ITS.</p>
<p><img src="figures/cits-on-zenoh.drawio.png" alt="" /></p>
<h2 id="btp-integration-in-rust-and-zenoh"><a class="header" href="#btp-integration-in-rust-and-zenoh">BTP Integration in Rust and Zenoh</a></h2>
<p>This is a working-in-progress task to add BTP/GN link to Zenoh. The
initial step is to implement the Rust interface for Vanetza's C++ BTP
socket. The code implementqation can be found in the
vanetza-btp-service repository.</p>
<p><a href="https://github.com/NEWSLabNTU/vanetza-btp-service/">vanetza-btp-service</a></p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                        
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                            </nav>

        </div>

        
        
        
                <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        
        
                <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        
                        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
                
    </body>
</html>
